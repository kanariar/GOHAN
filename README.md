#### Swiftを勉強するために作ったアプリです

## アプリタイトル：今日のごはんどうする？

<img src="https://github.com/user-attachments/assets/290d63d8-f5d9-4a1c-8091-c57b80723bf1" width="327" alt="今日のごはんどうする？ アプリ画面">

**今日のごはんを一緒に考えるiOSアプリです。**

| 項目 | 内容 |
| --- | --- |
| **開発言語** | Swift 5 |
| **フレームワーク** | SwiftUI, UIKit (UIGraphicsImageRenderer) |
| **対応OS** | iOS 16.0以上 |

---

## 概要

友人とお出かけをして食事を決める時、食べたいものがあれば「ここ行きたい！」とすぐ決まります。
しかし、お互い特に行きたい場所がないとき、「なんの気分...？」「調べてみるね...！」と微妙な時間になります。

**この悩みを解決するためにこのアプリを作成しました。**

ユーザーが直感的に「気分」を伝えるだけで、「何を食べたいか」の意思決定をサポートすることを目的としています。
Swiftの学習の一環として、まずは自分が日常で使うツールを目指して開発しました。

---

## 主な機能

* **キャラクターとの対話的診断**
    パートナーキャラクターの猫（アメリ）との会話形式で診断が進行。ユーザーは「気分タグ」を選択していくだけで、直感的に好みを伝えられます。

* **目的別フロー分岐**
    起動時に「もう決まってる！」「一緒に考えて！」の選択肢を提示。目的が明確なユーザーには効率的な検索機能を、相談したいユーザーには診断機能を提供します。

* **スコア制の推薦ロジック**
    ユーザーが選択したタグに基づき、全レシピをアルゴリズムによってスコアリング。単純に絞り込むだけでなく、ユーザーの気分への「マッチ度」が高い順に結果を提案しマッチ度をあげます。

* **Web検索連携**
    提案された食事をタップすると、ブラウザが起動し「（レシピ名） レシピ」の検索結果を即座に表示。レシピ検索の手間を省き、作りたい気分にさせます。

* **画像共有機能**
    診断結果を、キャラクターと提案レシピがデザインされた一枚の画像として生成。LINEやSNSで簡単に共有でき、コミュニケーションのきっかけを生み出します。

---

## 使用技術

* **対話形式UI**
    SwiftUIを駆使し、キャラクターとの話ウィンドウを実装。`@State`による動的なセリフ・表情の更新で、キャラクターとの対話感を演出しました。

* **動的レイアウト**
    `GeometryReader`や`layoutPriority`を試行錯誤し、多様な画面サイズでもレイアウトが破綻しないようにしました。

* **MVVMパターンの採用**
    複雑な対話ロジックやスコアリングエンジンの状態管理を容易にするため、Viewとビジネスロジック（ViewModel）を分離する設計を採用しました。これにより、コードのテスト容易性と保守性の向上を図りました。

* **再利用可能なコンポーネント**
    `ConversationView`や`TagCard`といったUI部品をコンポーネント化することで、コードの可読性と保守性を高めました。

* **柔軟なスコアリングエンジン**
    複数の「気分タグ」に重み付け（「食べたいもの」ボーナス点）を行い、ユーザーの多様な好みに応える柔軟な推薦ロジックを構築しました。

* **Viewの画像化**
    SwiftUIのViewを`UIGraphicsImageRenderer`を用いて画像（UIImage）に変換する機能を実装し、SNS共有機能を実現しました。

* **URLエンコーディング**
    `addingPercentEncoding`を適切に使用し、日本語を含む検索クエリを安全にWeb検索URLへ連携させる機能を実装しました。

---

## 今後の展望

* **A/Bテスト機能**
    パートナーキャラクターAとB、2人の診断結果を比較・統合し、最適な一品を提案する「ふたりごはんモード」の実装。

* **ごはん日記機能**
    診断結果から実際に作った料理を記録し、カレンダーで振り返れる機能。

* **データ永続化**
    SwiftDataやCore Dataを用いて、診断履歴や日記データをデバイスに保存する機能。
